<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ByteBite - Restaurant Portal</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav class="navbar">
    <div class="container">
      <div class="nav-brand">
        <h1>ByteBite</h1>
        <p class="nav-subtitle">Delivery in minutes</p>
      </div>
      <div class="nav-links">
        <a class="nav-link" href="index.html">Home</a>
        <a class="nav-link" href="customer.html">Customer portal</a>
        <a class="nav-link active" href="restaurant.html">Restaurant portal</a>
        <a class="nav-link" href="login.html">Login / Sign up</a>
      </div>
    </div>
  </nav>

  <header class="page-header">
    <div class="container">
      <p class="eyebrow">Publish meals</p>
      <h1>Register dishes for your delivery area</h1>
      <p>Provide clear details so customers can discover you in their area.</p>
    </div>
  </header>

  <main class="container">
    <section class="form-section">
      <div class="form-container">
        <div class="section-heading">
          <p class="eyebrow">One form</p>
          <h2>Register a new meal</h2>
          <p class="section-subtitle">Fields map directly to the Azure Function payload.</p>
        </div>

        <form id="restaurantForm" class="form">
          <div class="form-group">
            <label for="restaurantName">Restaurant name</label>
            <input type="text" id="restaurantName" required>
          </div>

          <div class="form-group">
            <label for="dishName">Dish name</label>
            <input type="text" id="dishName" required>
          </div>

          <div class="form-group">
            <label>Dish Image</label>
            <div style="margin-bottom: 10px;">
              <label for="imageFile" style="display: block; margin-bottom: 5px; font-weight: normal;">
                <strong>Option 1:</strong> Upload Image File
              </label>
              <input type="file" id="imageFile" accept="image/*" style="margin-bottom: 10px;">
              <small style="display: block; color: #666;">Select an image file (JPG, PNG, GIF, WebP - max 5MB)</small>
            </div>
            <div id="imagePreview" style="margin: 10px 0; display: none;">
              <img id="previewImg" src="" alt="Preview" style="max-width: 300px; max-height: 200px; border: 1px solid #ddd; border-radius: 4px;">
              <button type="button" onclick="clearImagePreview()" style="display: block; margin-top: 5px; padding: 5px 10px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer;">Remove Image</button>
            </div>
            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">
              <label for="imageUrl" style="display: block; margin-bottom: 5px; font-weight: normal;">
                <strong>Option 2:</strong> Or provide an image URL
              </label>
              <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg">
              <small style="display: block; color: #666; margin-top: 5px;">Provide a direct link to an image (if not uploading a file)</small>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="price">Price (€)</label>
              <input type="number" id="price" step="0.01" min="0" required>
            </div>
            <div class="form-group">
              <label for="prepTime">Preparation time (minutes)</label>
              <input type="number" id="prepTime" min="1" required>
              <small>Used to calculate delivery estimates.</small>
            </div>
          </div>

          <div class="form-group">
            <label for="deliveryArea">Delivery area</label>
            <select id="deliveryArea" required>
              <option value="">Select an area</option>
              <option value="North">North</option>
              <option value="Central">Central</option>
              <option value="South">South</option>
            </select>
          </div>

          <div class="form-group">
            <label for="description">Description</label>
            <textarea id="description" rows="3" required></textarea>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">Register meal</button>
          </div>
        </form>

        <div id="successMessage" class="message message-success" style="display: none;">
          ✅ Meal registered successfully!
        </div>
        <div id="errorMessage" class="message message-error" style="display: none;">
          <span id="errorText"></span>
        </div>
      </div>
    </section>

    <section class="info-grid">
      <div class="card info-card">
        <p class="eyebrow">Tips</p>
        <h3>Keep entries clear</h3>
        <ul class="meta-list">
          <li>Use short dish names customers recognize.</li>
          <li>Keep descriptions concise and note allergens or signatures.</li>
          <li>Prep time should reflect busy-hour timing.</li>
        </ul>
      </div>
      <div class="card info-card">
        <p class="eyebrow">What happens next</p>
        <h3>Saved to Azure</h3>
        <p>Data is sent to RegisterMeal and stored in Table Storage. Customers in the selected area see the dish immediately.</p>
      </div>
    </section>
  </main>

  <footer>
    <p>Cloud Computing Project · IE University · Fall 2025</p>
  </footer>

  <script src="app.js"></script>
  <script>
    // Image preview functionality
    const imageFileInput = document.getElementById('imageFile');
    const imagePreview = document.getElementById('imagePreview');
    const previewImg = document.getElementById('previewImg');
    const imageUrlInput = document.getElementById('imageUrl');

    imageFileInput.addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        // Validate file size (5MB max)
        if (file.size > 5 * 1024 * 1024) {
          alert('Image file is too large. Maximum size is 5MB.');
          e.target.value = '';
          return;
        }

        // Validate file type
        if (!file.type.startsWith('image/')) {
          alert('Please select an image file.');
          e.target.value = '';
          return;
        }

        // Show preview
        const reader = new FileReader();
        reader.onload = function(e) {
          previewImg.src = e.target.result;
          imagePreview.style.display = 'block';
        };
        reader.readAsDataURL(file);

        // Clear URL input when file is selected
        imageUrlInput.value = '';
      }
    });

    function clearImagePreview() {
      imageFileInput.value = '';
      imagePreview.style.display = 'none';
      previewImg.src = '';
    }

    // Clear file input when URL is entered
    imageUrlInput.addEventListener('input', function() {
      if (this.value.trim()) {
        imageFileInput.value = '';
        imagePreview.style.display = 'none';
      }
    });
  </script>
</body>
</html>